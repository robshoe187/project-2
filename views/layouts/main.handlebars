<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Batter's Up: Who's Hot (and Not) in MLB 2021</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <div class="wrapper">
    <header>
      <h1>
        <a href="/">Batter's Up: Who's Hot (and Not) in MLB 2021</a>
      </h1>
      <h3>Find Your Favorite Hitter</h3></a>
      </h1>
      <nav>
        {{#if loggedIn}}
        <a href="/dashboard">dashboard</a>
        <button id="logout" class="btn-no-style">logout</button>
        {{else}}
        <a href="/login">login</a>
        {{/if}}
      </nav>
    </header>
    <main>
      {{{ body }}}
    </main>
    <footer>
      A project by Xavier Fegan, Robert Shoemaker and Don St. John
    </footer>
  </div>

  {{#if loggedIn}}
  {{/if}}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js" integrity="sha512-n/4gHW3atM3QqRcbCn6ewmpxcLAHGaDjpEBu4xZd47N0W2oQ+6q7oc3PXstrJYXcbNU1OHdQ1T7pAP+gi5Yu8g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
  {{!-- <script src="https://cdn.jsdelivr.net/gh/xcash/bootstrap-autocomplete@v2.3.7/dist/latest/bootstrap-autocomplete.js"></script> --}}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
  {{!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> --}}
  {{!-- <script src="https://cdn.jsdelivr.net/gh/xcash/bootstrap-autocomplete@v2.3.7/dist/latest/bootstrap-autocomplete.js"></script> --}}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/javascript/myChart.js"></script>
  {{!-- <script src="/javascript/autoComplete.js"></script> --}}
  <script src="/javascript/logout.js"></script>

<script>
  
var batterID = [];
var playerName = [];

var getNames = function(){
fetch("/api/batters-route/names")
    .then((response) => {
        console.log(response.json().then(
            (data) => { console.log(data) 
              console.log(data[1].name)
              for (let i = 0; i < data.length; i++) {
                  playerName[i] = data[i].name;
                  batterID[playerName[i]] = data[i].id;
                };
            }
        ));
    });
}

getNames();

$("#tags").autocomplete({
    source: playerName
}).data("ui-autocomplete")._renderItem = function (ul, item) {
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append('<div><a class="ac-item-a" href="http://localhost:3001/api/batters-route/'+ batterID[item.label] +'" >'+ item.label + '</a></div>')
        .appendTo(ul);
};
</script>
</body>
</html>